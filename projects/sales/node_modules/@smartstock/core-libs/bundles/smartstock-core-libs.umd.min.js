!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("@angular/material/dialog"),require("@angular/common/http"),require("bfastjs"),require("uuid"),require("@angular/router"),require("@angular/forms"),require("rxjs/operators"),require("@angular/material/button"),require("@angular/material/card"),require("@angular/material/divider"),require("@angular/material/expansion"),require("@angular/material/form-field"),require("@angular/material/icon"),require("@angular/material/list"),require("@angular/material/menu"),require("@angular/material/progress-bar"),require("@angular/material/progress-spinner"),require("@angular/material/select"),require("@angular/material/toolbar"),require("@angular/material/badge"),require("@angular/material/tooltip"),require("@angular/material/core"),require("@angular/common"),require("@angular/material/snack-bar")):"function"==typeof define&&define.amd?define("@smartstock/core-libs",["exports","@angular/core","rxjs","@angular/material/dialog","@angular/common/http","bfastjs","uuid","@angular/router","@angular/forms","rxjs/operators","@angular/material/button","@angular/material/card","@angular/material/divider","@angular/material/expansion","@angular/material/form-field","@angular/material/icon","@angular/material/list","@angular/material/menu","@angular/material/progress-bar","@angular/material/progress-spinner","@angular/material/select","@angular/material/toolbar","@angular/material/badge","@angular/material/tooltip","@angular/material/core","@angular/common","@angular/material/snack-bar"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).smartstock=t.smartstock||{},t.smartstock["core-libs"]={}),t.ng.core,t.rxjs,t.ng.material.dialog,t.ng.common.http,t.bfastjs,t.uuid,t.ng.router,t.ng.forms,t.rxjs.operators,t.ng.material.button,t.ng.material.card,t.ng.material.divider,t.ng.material.expansion,t.ng.material.formField,t.ng.material.icon,t.ng.material.list,t.ng.material.menu,t.ng.material.progressBar,t.ng.material.progressSpinner,t.ng.material.select,t.ng.material.toolbar,t.ng.material.badge,t.ng.material.tooltip,t.ng.material.core,t.ng.common,t.ng.material.snackBar)}(this,(function(t,e,n,r,o,a,i,s,c,u,l,p,d,h,m,f,g,v,y,b,w,I,x,S,k,C,P){"use strict";var j=function(){function t(){}return t.prototype.broadcast=function(t,e){var n=new CustomEvent(t,{detail:e});window.dispatchEvent(n)},t.prototype.listen=function(t,e){window.addEventListener(t,e)},t.prototype.unListen=function(t,e){window.removeEventListener(t,e)},t}();j.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new j},token:j,providedIn:"root"}),j.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],j.ctorParameters=function(){return[]};function F(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function s(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}c((r=r.apply(t,e||[])).next())}))}function M(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}Object.create;function A(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;var U=function(){function t(){}return t.prototype.i=function(t,e,n){void 0===n&&(n=!1),n&&console.log(e,t)},t.prototype.e=function(t,e,n){void 0===n&&(n=!1),n&&console.error(e,t)},t.prototype.w=function(t,e,n){void 0===n&&(n=!1),n&&console.warn(e,t)},t}();U.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new U},token:U,providedIn:"root"}),U.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],U.ctorParameters=function(){return[]};var L=function(){function t(){}return t.generateUUID=function(){return i.v4()},t.randomString=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*r));return e},t}(),_={ACTIVE_SHOP_SET:"_ssm_active_shop_set_",ACTIVE_SHOP_REMOVE:"_ssm_active_shop_removed_",SETTINGS_UPDATED:"_ssm_settings_updated_",STOCK_UPDATED:"_ssm_stock_updated_",ADD_CART:"add_cart",NO_OF_CART:"noofProductsCart",CART_ITEMS:"_cart_items_"},N=function(){function t(t){this.eventApi=t,this.smartStockCache=a.BFast.cache({database:"smartstock",collection:"config"})}return t.prototype.getActiveUser=function(){return F(this,void 0,void 0,(function(){return M(this,(function(t){switch(t.label){case 0:return[4,a.BFast.auth().currentUser()];case 1:return[2,t.sent()]}}))}))},t.prototype.saveSales=function(t){return F(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:return[4,this.getActiveShop()];case 1:return e=n.sent(),[4,a.BFast.cache({database:"sales",collection:e.projectId}).set(L.randomString(12),t,{dtl:720})];case 2:return n.sent(),[2]}}))}))},t.prototype.getActiveShop=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return[4,this.smartStockCache.get("activeShop")];case 1:if(t=e.sent())return[2,t];throw{message:"No Active Shop"}}}))}))},t.prototype.saveActiveShop=function(t){return F(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:return[4,this.smartStockCache.set("activeShop",t,{dtl:7})];case 1:return e=n.sent(),this.eventApi.broadcast(_.ACTIVE_SHOP_SET),[2,e]}}))}))},t.prototype.getCurrentProjectId=function(){return F(this,void 0,void 0,(function(){return M(this,(function(t){switch(t.label){case 0:return[4,this.smartStockCache.get("cPID")];case 1:return[2,t.sent()]}}))}))},t.prototype.saveCurrentProjectId=function(t){return F(this,void 0,void 0,(function(){return M(this,(function(e){switch(e.label){case 0:return[4,this.smartStockCache.set("cPID",t,{dtl:7})];case 1:return[2,e.sent()]}}))}))},t.prototype.clearSmartStockCache=function(){return F(this,void 0,void 0,(function(){return M(this,(function(t){switch(t.label){case 0:return[4,this.smartStockCache.clearAll()];case 1:return[2,t.sent()]}}))}))},t.prototype.saveActiveUser=function(t){return F(this,void 0,void 0,(function(){return M(this,(function(e){return[2,a.BFast.auth().setCurrentUser(t,6)]}))}))},t.prototype.removeActiveShop=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return[4,this.smartStockCache.set("activeShop",void 0)];case 1:return t=e.sent(),this.eventApi.broadcast(_.ACTIVE_SHOP_REMOVE),[2,t]}}))}))},t.prototype.removeActiveUser=function(){return F(this,void 0,void 0,(function(){return M(this,(function(t){switch(t.label){case 0:return[4,a.BFast.auth().setCurrentUser(void 0,0)];case 1:return[2,t.sent()]}}))}))},t.prototype.removeStocks=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return[4,this.getActiveShop()];case 1:return t=e.sent(),[4,a.BFast.cache({database:"stocks",collection:t.projectId}).clearAll()];case 2:return[2,e.sent()]}}))}))},t.prototype.getStocks=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return[4,this.getActiveShop()];case 1:return t=e.sent(),[4,a.BFast.cache({database:"stocks",collection:t.projectId}).get("all")];case 2:return[2,e.sent()]}}))}))},t.prototype.saveStocks=function(t){return F(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:return[4,this.getActiveShop()];case 1:return e=n.sent(),[4,a.BFast.cache({database:"stocks",collection:e.projectId}).set("all",t,{dtl:360})];case 2:return[2,n.sent()]}}))}))},t.prototype.saveStock=function(t){return F(this,void 0,void 0,(function(){return M(this,(function(t){return[2,void 0]}))}))},t.prototype.getCustomers=function(){return F(this,void 0,void 0,(function(){var t,e,n,r,o,i,s,c,u,l,p,d;return M(this,(function(h){switch(h.label){case 0:return[4,this.getActiveShop()];case 1:return t=h.sent(),[4,(e=a.BFast.cache({database:"customers",collection:t.projectId})).keys()];case 2:n=h.sent(),r=[],h.label=3;case 3:h.trys.push([3,8,9,10]),o=A(n),i=o.next(),h.label=4;case 4:return i.done?[3,7]:(s=i.value,u=(c=r).push,[4,e.get(s)]);case 5:u.apply(c,[h.sent()]),h.label=6;case 6:return i=o.next(),[3,4];case 7:return[3,10];case 8:return l=h.sent(),p={error:l},[3,10];case 9:try{i&&!i.done&&(d=o.return)&&d.call(o)}finally{if(p)throw p.error}return[7];case 10:return[2,r]}}))}))},t.prototype.saveCustomer=function(t){return F(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:return[4,this.getActiveShop()];case 1:return e=n.sent(),[4,a.BFast.cache({database:"customers",collection:e.projectId}).set(t.displayName,t,{dtl:360})];case 2:return[2,n.sent()]}}))}))},t}();N.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new N(e.ɵɵinject(j))},token:N,providedIn:"root"}),N.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],N.ctorParameters=function(){return[{type:j}]};var R=function(){function t(t,e,n){this.httpClient=t,this.storageService=e,this.indexDb=n,this.ssmServerURL="https://smartstock-daas.bfast.fahamutech.com",this.ssmFunctionsURL="https://smartstock-faas.bfast.fahamutech.com",this.ssmHeader={"X-Parse-Application-Id":"smartstock"},this.ssmFunctionsHeader={"bfast-application-id":"smartstock","content-type":"application/json"}}return t.prototype.getSSMUserHeader=function(){return F(this,void 0,void 0,(function(){var t,e;return M(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.storageService.getActiveUser()];case 1:return t=n.sent(),[4,this.storageService.getActiveShop()];case 2:if(e=n.sent(),!t)throw new Error("no user records found");if(t&&t.sessionToken&&e&&e.applicationId)return[2,{"X-Parse-Application-Id":"smartstock","X-Parse-Session-Token":t.sessionToken,"Content-Type":"application/json"}];throw new Error("token not found");case 3:throw n.sent(),{message:"Fails to get user, so to retrieve token"};case 4:return[2]}}))}))},t.prototype.getCustomerApplicationId=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.storageService.getActiveShop()];case 1:if(!(t=e.sent()))throw new Error("No user record");return[2,t.applicationId];case 2:throw{message:"Fails to get application id",reason:e.sent().toString()};case 3:return[2]}}))}))},t.prototype.getCustomerServerURLId=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.storageService.getActiveShop()];case 1:if(!(t=e.sent()))throw new Error("No user in local storage");return[2,t.projectUrlId];case 2:throw{message:"Fails to get user",reason:e.sent().toString()};case 3:return[2]}}))}))},t.prototype.getCustomerHeader=function(){return F(this,void 0,void 0,(function(){var t,e,n;return M(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t={},e="X-Parse-Application-Id",[4,this.getCustomerApplicationId()];case 1:return[2,(t[e]=r.sent(),t)];case 2:return n=r.sent(),console.warn(n),[2,{}];case 3:return[2]}}))}))},t.prototype.getCustomerPostHeader=function(t){return F(this,void 0,void 0,(function(){var e,n;return M(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),e={},n="X-Parse-Application-Id",[4,this.getCustomerApplicationId()];case 1:return[2,(e[n]=r.sent(),e["content-type"]=t||"application/json",e)];case 2:throw{message:"Fails to get customer post header",reason:r.sent().toString()};case 3:return[2]}}))}))},t.prototype.getCustomerServerURL=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t="https://",[4,this.getCustomerServerURLId()];case 1:return[2,t+e.sent()+".bfast.fahamutech.com"];case 2:throw{message:"Fails to get server url",reason:e.sent().toString()};case 3:return[2]}}))}))},t.prototype.getCustomerProjectId=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.indexDb.getActiveShop()];case 1:if(!(t=e.sent()))throw new Error("No user in local storage");return[2,t.projectId];case 2:throw{message:"Fails to get project id",reason:e.sent().toString()};case 3:return[2]}}))}))},t.prototype.getPrinterAddress=function(t){t(null)},t.prototype.saveSettings=function(t){var e=this;return new Promise((function(n,r){return F(e,void 0,void 0,(function(){var e,o,a=this;return M(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.storageService.getActiveShop()];case 1:return e=i.sent(),this.httpClient.put(this.ssmFunctionsURL+"/settings/"+e.projectId,t,{headers:this.ssmFunctionsHeader}).subscribe((function(t){e.settings=t.settings,a.storageService.saveActiveShop(e).then((function(t){n("Shop settings updated")})).catch((function(t){r(t)}))}),(function(t){r(t)})),[3,3];case 2:return o=i.sent(),r(o),[3,3];case 3:return[2]}}))}))}))},t.prototype.getSettings=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.storageService.getActiveShop()];case 1:return(t=e.sent())&&t.settings?[2,t.settings]:[2,{printerFooter:"Thank you",printerHeader:"",saleWithoutPrinter:!0,allowRetail:!0,allowWholesale:!0}];case 2:throw{message:"Fails to get settings",reason:e.sent().toString()};case 3:return[2]}}))}))},t}();R.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new R(e.ɵɵinject(o.HttpClient),e.ɵɵinject(N),e.ɵɵinject(N))},token:R,providedIn:"root"}),R.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],R.ctorParameters=function(){return[{type:o.HttpClient},{type:N},{type:N}]};var T=function(t){this.dialogRef=t};T.decorators=[{type:e.Component,args:[{template:'\n    <div>\n      <div mat-dialog-title>Account Verification</div>\n      <div mat-dialog-content>\n        <p>\n          Your email is not verified we send a link to the email\n          <br>\n          you use when open account for you to verify your account\n        </p>\n      </div>\n      <div mat-dialog-actions>\n        <button (click)="dialogRef.close()" mat-button color="primary">Close</button>\n      </div>\n    </div>\n  '}]}],T.ctorParameters=function(){return[{type:r.MatDialogRef}]};var E=function(){function t(t,e,n,r,o){this.httpClient=t,this.settingsService=e,this.dialog=n,this.logger=r,this.storageService=o}return t.prototype.currentUser=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return[4,a.BFast.auth().currentUser()];case 1:return(t=e.sent())&&"admin"!==t.role?[2,t]:[3,2];case 2:return t&&!0===t.verified?[2,t]:[3,3];case 3:return[4,a.BFast.auth().setCurrentUser(void 0)];case 4:return[2,e.sent()]}}))}))},t.prototype.deleteUser=function(t){return F(this,void 0,void 0,(function(){var e,n,r,o,i;return M(this,(function(s){switch(s.label){case 0:return n=(e=a.BFast.functions().request("/functions/users/"+t.id)).delete,r={},o={},i={},[4,a.BFast.auth().currentUser()];case 1:return[2,n.apply(e,[(r.data=(o.context=(i.admin=s.sent(),i),o),r)])]}}))}))},t.prototype.getAllUser=function(t){return F(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:return[4,this.settingsService.getCustomerProjectId()];case 1:return e=n.sent(),[2,a.BFast.database().collection("_User").query().equalTo("projectId",e).includesIn("role",["user","manager"]).size(t.size).skip(t.skip).find({useMasterKey:!0})]}}))}))},t.prototype.getUser=function(t,e){},t.prototype.login=function(t){return F(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:return[4,a.BFast.auth().logIn(t.username,t.password)];case 1:return e=n.sent(),[4,this.storageService.removeActiveShop()];case 2:return n.sent(),e&&"admin"!==e.role?[4,this.storageService.saveActiveUser(e)]:[3,4];case 3:return n.sent(),[2,e];case 4:return e&&!0===e.verified?[4,this.storageService.saveActiveUser(e)]:[3,6];case 5:return n.sent(),[2,e];case 6:return[4,a.BFast.functions().request("/functions/users/reVerifyAccount/"+t.username).post()];case 7:throw n.sent(),this.dialog.open(T,{closeOnNavigation:!0,disableClose:!0}),{code:403,err:"account not verified"}}}))}))},t.prototype.logout=function(t){return F(this,void 0,void 0,(function(){return M(this,(function(t){switch(t.label){case 0:return[4,a.BFast.auth().logOut()];case 1:return t.sent(),[4,this.storageService.removeActiveUser()];case 2:return t.sent(),[4,this.storageService.removeActiveShop()];case 3:return t.sent(),[2]}}))}))},t.prototype.register=function(t){return F(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),t.settings={printerFooter:"Thank you",printerHeader:"",saleWithoutPrinter:!0,allowRetail:!0,allowWholesale:!0},t.shops=[],[4,this.storageService.removeActiveShop()];case 1:return n.sent(),[4,a.BFast.functions().request("/functions/users/create").post(t,{headers:this.settingsService.ssmFunctionsHeader})];case 2:return[2,n.sent()];case 3:throw(e=n.sent())&&e.response&&e.response.data?e.response.data:e.toString();case 4:return[2]}}))}))},t.prototype.resetPassword=function(t){return a.BFast.functions().request("/functions/users/resetPassword/"+encodeURIComponent(t)).get()},t.prototype.refreshToken=function(){return F(this,void 0,void 0,(function(){return M(this,(function(t){return[2,a.BFast.auth().currentUser()]}))}))},t.prototype.addUser=function(t){var e=this;return new Promise((function(n,r){return F(e,void 0,void 0,(function(){var e,o,a;return M(this,(function(i){switch(i.label){case 0:return[4,this.storageService.getActiveShop()];case 1:return e=i.sent(),o=t.shops?t.shops:[],a=o.filter((function(t){return t.applicationId!==e.applicationId})),t.applicationId=e.applicationId,t.projectUrlId=e.projectUrlId,t.projectId=e.projectId,t.businessName=e.businessName,t.settings=e.settings,t.shops=a,this.httpClient.post(this.settingsService.ssmFunctionsURL+"/functions/users/seller",t,{headers:this.settingsService.ssmFunctionsHeader}).subscribe((function(t){n(t)}),(function(t){r(t)})),[2]}}))}))}))},t.prototype.getShops=function(){return F(this,void 0,void 0,(function(){var t,e;return M(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.storageService.getActiveUser()];case 1:return t=n.sent(),e=[],t.shops.forEach((function(t){e.push(t)})),e.push({businessName:t.businessName,projectId:t.projectId,applicationId:t.applicationId,projectUrlId:t.projectUrlId,settings:t.settings,street:t.street,country:t.country,region:t.region}),[2,e];case 2:throw n.sent();case 3:return[2]}}))}))},t.prototype.getCurrentShop=function(){return F(this,void 0,void 0,(function(){var t;return M(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.storageService.getActiveShop()];case 1:if((t=e.sent())&&t.projectId&&t.applicationId&&t.projectUrlId)return[2,t];throw new Error("No active shop in records");case 2:throw e.sent();case 3:return[2]}}))}))},t.prototype.saveCurrentShop=function(t){return F(this,void 0,void 0,(function(){return M(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,this.storageService.saveCurrentProjectId(t.projectId)];case 1:return e.sent(),[4,this.storageService.saveActiveShop(t)];case 2:return[2,e.sent()];case 3:throw e.sent();case 4:return[2]}}))}))},t.prototype.createShop=function(t){},t.prototype.deleteShop=function(t){},t.prototype.updatePassword=function(t,e){var n=this;return new Promise((function(r,o){n.httpClient.put(n.settingsService.ssmFunctionsURL+"/functions/users/password/"+t.id,{password:e},{headers:n.settingsService.ssmFunctionsHeader}).subscribe((function(t){r(t)}),(function(t){o(t)}))}))},t.prototype.updateUser=function(t,e){var n=this;return new Promise((function(r,o){return F(n,void 0,void 0,(function(){return M(this,(function(n){return this.httpClient.put(this.settingsService.ssmFunctionsURL+"/functions/users/"+t.id,e,{headers:this.settingsService.ssmFunctionsHeader}).subscribe((function(t){return r(t)}),(function(t){o(t)})),[2]}))}))}))},t.prototype.updateCurrentUser=function(t){return F(this,void 0,void 0,(function(){return M(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.storageService.saveActiveUser(t)];case 1:return[2,e.sent()];case 2:throw e.sent();case 3:return[2]}}))}))},t.prototype.changePasswordFromOld=function(t){var e=this;return new Promise((function(n,r){e.httpClient.put(e.settingsService.ssmFunctionsURL+"/functions/users/password/change/"+t.user.id,{lastPassword:t.lastPassword,username:t.user.username,password:t.password},{headers:e.settingsService.ssmFunctionsHeader}).subscribe((function(t){return n(t)}),(function(t){r(t)}))}))},t}();E.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new E(e.ɵɵinject(o.HttpClient),e.ɵɵinject(R),e.ɵɵinject(r.MatDialog),e.ɵɵinject(U),e.ɵɵinject(N))},token:E,providedIn:"root"}),E.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],E.ctorParameters=function(){return[{type:o.HttpClient},{type:R},{type:r.MatDialog},{type:U},{type:N}]};var D=function(){};D.versionName="",D.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new D},token:D,providedIn:"root"}),D.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}];var B=function(){function t(t,e,r){this.userService=t,this.logger=e,this.eventApi=r,this.versionNumber=n.of(),this.selectedMenu={background:"#1b5e20",borderTopRightRadius:"50px",borderBottomRightRadius:"50px",color:"white"}}return t.prototype.ngOnInit=function(){var t=this;this.versionNumber=n.of(D.versionName),this.userService.getCurrentShop().then((function(e){t.shop=e})).catch((function(e){t.logger.i(e),t.shop=void 0})),this.userService.currentUser().then((function(e){t.currentUser=e})),this.eventApi.listen(_.SETTINGS_UPDATED,(function(e){t.userService.getCurrentShop().then((function(e){t.shop=e})).catch((function(e){t.logger.e(e,"AdminDrawerComponent:37"),t.shop=void 0}))}))},t.prototype.shouldExpand=function(t){return new URL(location.href).pathname.startsWith("/"+t)},t.prototype.isManager=function(){return this.currentUser&&("admin"===this.currentUser.role||"manager"===this.currentUser.role)},t.prototype.isAdmin=function(){return this.currentUser&&"admin"===this.currentUser.role},t}();B.decorators=[{type:e.Component,args:[{selector:"smartstock-drawer",template:'\n    <div class="my-side-nav">\n      <div>\n        <div class="d-flex justify-content-center align-items-center flex-column" style="padding-bottom: 8px">\n          <div style="padding: 16px; justify-content: center; align-items: center">\n            <mat-icon style="width: 70px; height: 70px; font-size: 70px" color="primary">store</mat-icon>\n          </div>\n          <span style="max-width: 150px; overflow: hidden; text-overflow: ellipsis;"\n                *ngIf="shop">{{shop.businessName}}</span>\n          <span style="width: 4px; height: 4px"></span>\n          <button style="width: 80%"\n                  color="primary"\n                  class="btn-block"\n                  routerLink="/account/shop" mat-button>\n            Change Shop\n          </button>\n        </div>\n\n        <div class="d-flex justify-content-center align-items-center">\n          <mat-divider></mat-divider>\n        </div>\n\n        <mat-accordion [multi]="true" class="mat-elevation-z0">\n          <mat-nav-list *ngIf="isAdmin()" class="mat-elevation-z0">\n            <mat-list-item [ngStyle]="shouldExpand(\'dashboard\')?selectedMenu:{}" routerLink="/dashboard">\n              <mat-icon matListIcon matPrefix>dashboard</mat-icon>\n              <span matLine style="margin-left: 8px">Dashboard</span>\n            </mat-list-item>\n          </mat-nav-list>\n\n          <mat-divider *ngIf="isAdmin()"></mat-divider>\n\n          <mat-expansion-panel *ngIf="isAdmin()" [expanded]="shouldExpand(\'report\')" class="mat-elevation-z0">\n            <mat-expansion-panel-header>\n              <mat-icon matPrefix>table_chart</mat-icon>\n              <span style="margin-left: 8px">Reports</span>\n            </mat-expansion-panel-header>\n            <mat-nav-list>\n              <a mat-list-item routerLink="/report/sales">Sales Reports</a>\n              <a mat-list-item routerLink="/report/stocks">Stock Reports</a>\n            </mat-nav-list>\n          </mat-expansion-panel>\n\n          <mat-divider *ngIf="currentUser && currentUser.role===\'admin\'"></mat-divider>\n\n          <mat-nav-list>\n            <mat-list-item [ngStyle]="shouldExpand(\'sale\')?selectedMenu:{}" routerLink="/sale">\n              <mat-icon matListIcon matPrefix>shop_front</mat-icon>\n              <span matLine style="margin-left: 8px">Sale</span>\n            </mat-list-item>\n          </mat-nav-list>\n\n          <mat-divider></mat-divider>\n\n          <mat-expansion-panel *ngIf="isManager()" [expanded]="shouldExpand(\'purchase\')" class="mat-elevation-z0">\n            <mat-expansion-panel-header>\n              <mat-icon matPrefix>receipts</mat-icon>\n              <span style="margin-left: 8px">Purchase</span>\n            </mat-expansion-panel-header>\n            <mat-nav-list>\n              <a mat-list-item routerLink="/purchase">All Purchases</a>\n              <a mat-list-item routerLink="/purchase/create">New Purchase</a>\n              <a mat-list-item routerLink="/stock" [queryParams]="{t:3}">Suppliers</a>\n            </mat-nav-list>\n          </mat-expansion-panel>\n\n          <mat-divider *ngIf="currentUser && (currentUser.role===\'admin\' || currentUser.role === \'manager\')"></mat-divider>\n\n          <mat-nav-list *ngIf="isManager()">\n            <mat-list-item [ngStyle]="shouldExpand(\'stock\')?selectedMenu:{}" routerLink="/stock">\n              <mat-icon matListIcon matPrefix>store</mat-icon>\n              <span matLine style="margin-left: 8px">Stock</span>\n            </mat-list-item>\n          </mat-nav-list>\n\n          <mat-divider *ngIf="isManager()"></mat-divider>\n\n          <mat-expansion-panel [expanded]="shouldExpand(\'settings\')" class="mat-elevation-z0">\n            <mat-expansion-panel-header>\n              <mat-icon matPrefix>supervisor_account</mat-icon>\n              <span style="margin-left: 8px">Account</span>\n            </mat-expansion-panel-header>\n            <mat-nav-list>\n              <a *ngIf="isManager()" mat-list-item\n                 routerLink="/account/settings">\n                <div class="d-flex flex-row flex-nowrap btn-block">\n                  <span>Settings</span>\n                  <span class="flex-grow-1"></span>\n                  <mat-icon>settings</mat-icon>\n                </div>\n              </a>\n              <a *ngIf="isManager()" mat-list-item\n                 routerLink="/account/users">\n                <div class="d-flex flex-row flex-nowrap btn-block">\n                  <span>Users</span>\n                  <span class="flex-grow-1"></span>\n                  <mat-icon>person_add</mat-icon>\n                </div>\n              </a>\n              <a mat-list-item routerLink="/account/profile">\n                <div class="d-flex flex-row flex-nowrap btn-block">\n                  <span>Profile</span>\n                  <span class="flex-grow-1"></span>\n                  <mat-icon>person</mat-icon>\n                </div>\n              </a>\n            </mat-nav-list>\n          </mat-expansion-panel>\n        </mat-accordion>\n\n      </div>\n      <span style="flex-grow: 1"></span>\n      <div style="display: flex; justify-content: center; align-items: center">\n        <span>Version: {{versionNumber | async}}</span>\n      </div>\n    </div>\n  ',styles:[".my-side-nav{display:flex;flex-direction:column;min-height:100vh;width:100%;z-index:50000}.drawer-head{background-position:50%;background-repeat:no-repeat;background-size:cover;height:180px}div.mat-list-item-content{width:100%!important}mat-divider{margin-left:10%;margin-right:10%;width:80%}"]}]}],B.ctorParameters=function(){return[{type:E},{type:U},{type:j}]},B.propDecorators={versionNumber:[{type:e.Input}]};var O=function(){function t(t,n,r,o){this.router=t,this.storage=n,this.userDatabase=r,this.eventService=o,this.showProgress=!1,this.hasBackRoute=!1,this.showSearch=!1,this.searchCallback=new e.EventEmitter,this.searchInputControl=new c.FormControl(""),this.searchProgressFlag=!1,this.isMobile=!1}return t.prototype.ngOnInit=function(){var t=this;this.storage.getActiveUser().then((function(e){t.currentUser=e})),this.searchInputControl.valueChanges.pipe(u.debounceTime(500),u.distinctUntilChanged()).subscribe((function(e){t.searchCallback.emit(t.searchInputControl.value)})),this.getProductsInCart(),this._clearSearchInputListener()},t.prototype.getProductsInCart=function(){var t=this;this.eventService.listen(_.NO_OF_CART,(function(e){t.noOfProductsInCart=e.detail}))},t.prototype.logout=function(){var t=this;this.userDatabase.logout(null).finally((function(){return t.router.navigateByUrl("")})).catch((function(t){return console.log("")}))},t.prototype._clearSearchInputListener=function(){},t}();O.decorators=[{type:e.Component,args:[{selector:"smartstock-toolbar",template:'\n    <mat-toolbar color="primary" class="sticky-top mat-elevation-z4">\n      <mat-toolbar-row>\n\x3c!--        <button routerLink="{{backLink}}" *ngIf="hasBackRoute && backLink" mat-icon-button>--\x3e\n\x3c!--          <mat-icon>arrow_back</mat-icon>--\x3e\n\x3c!--        </button>--\x3e\n        <button mat-icon-button (click)="sidenav.toggle()">\n          <mat-icon>menu</mat-icon>\n        </button>\n        <span>{{heading}}</span>\n        <span *ngIf="isMobile" style="flex: 1 1 auto"></span>\n        <span *ngIf="!isMobile && showSearch" style="width: 16px"></span>\n        <span *ngIf="!isMobile && !showSearch" style="flex: 1 1 auto"></span>\n        <smartstock-search-input [searchProgressFlag]="searchProgressFlag"\n                          *ngIf="!isMobile && showSearch" style="flex: 1 1 auto"\n                          [showSearch]="showSearch"\n                          [searchInputControl]="searchInputControl"\n                          [searchPlaceholder]="searchPlaceholder">\n        </smartstock-search-input>\n        <span *ngIf="!isMobile && showSearch" style="width: 16px"></span>\n        <button *ngIf="noOfProductsInCart> 0 && !isMobile" mat-icon-button (click)="cartdrawer.toggle()"\n                [matBadge]="noOfProductsInCart">\n          <mat-icon>shopping_cart</mat-icon>\n        </button>\n        <button *ngIf="!isMobile" class="ft-button" mat-button [matMenuTriggerFor]="menu">\n          <mat-icon>account_circle</mat-icon>\n          <span *ngIf="currentUser">{{"  " + currentUser.username}}</span>\n        </button>\n        <button *ngIf="isMobile" mat-icon-button [matMenuTriggerFor]="menu">\n          <mat-icon>more_vert</mat-icon>\n          \x3c!--      <span *ngIf="currentUser">{{"  " + currentUser.username}}</span>--\x3e\n        </button>\n        <mat-menu #menu>\n          <button mat-menu-item (click)="logout()">\n            <mat-icon>exit_to_app</mat-icon>\n            Logout\n          </button>\n          <button mat-menu-item routerLink="/account/profile">\n            <mat-icon>person</mat-icon>\n            My Profile\n          </button>\n        </mat-menu>\n      </mat-toolbar-row>\n\n      <mat-toolbar-row *ngIf="isMobile && showSearch">\n        \x3c!--    <span style="flex-grow: 1"></span>--\x3e\n        <smartstock-search-input [searchProgressFlag]="searchProgressFlag"\n                          style="flex: 1 1 auto"\n                          [showSearch]="showSearch"\n                          [searchInputControl]="searchInputControl"\n                          [searchPlaceholder]="searchPlaceholder">\n        </smartstock-search-input>\n        \x3c!--    <span style="flex-grow: 1"></span>--\x3e\n      </mat-toolbar-row>\n    </mat-toolbar>\n  '}]}],O.ctorParameters=function(){return[{type:s.Router},{type:N},{type:E},{type:j}]},O.propDecorators={heading:[{type:e.Input}],showProgress:[{type:e.Input}],sidenav:[{type:e.Input}],hasBackRoute:[{type:e.Input}],backLink:[{type:e.Input}],cartdrawer:[{type:e.Input}],showSearch:[{type:e.Input}],searchCallback:[{type:e.Output}],searchInputControl:[{type:e.Input}],searchPlaceholder:[{type:e.Input}],searchProgressFlag:[{type:e.Input}]};var q=function(){function t(t,e){this.dialogRef=t,this.data=e}return t.prototype.ngOnInit=function(){},t}();q.decorators=[{type:e.Component,args:[{selector:"smartstock-no-stock-dialog",template:'\n    <div>\n      <h5>Hello!</h5>\n      <mat-card-subtitle mat-dialog-content>\n        StockModel is not available yet, add product or refresh your stock\n      </mat-card-subtitle>\n      <div mat-dialog-actions>\n        <button (click)="dialogRef.close()" routerLink="/stock" mat-flat-button color="primary">Go To StockModel</button>\n        <button (click)="dialogRef.close()" mat-flat-button color="warn">Close</button>\n      </div>\n    </div>\n  '}]}],q.ctorParameters=function(){return[{type:r.MatDialogRef},{type:void 0,decorators:[{type:e.Inject,args:[r.MAT_DIALOG_DATA]}]}]};var H=function(){function t(t){this.userApi=t}return t.prototype.transform=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return F(this,void 0,void 0,(function(){var e;return M(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.userApi.getCurrentShop()];case 1:return e=n.sent(),t.push(e),[2,t.map((function(t){return t.businessName}))];case 2:return n.sent(),[2,[]];case 3:return[2]}}))}))},t}();H.decorators=[{type:e.Pipe,args:[{name:"shopsPipe"}]}],H.ctorParameters=function(){return[{type:E}]};var z=function(){function t(){this.refreshCallback=new e.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.callBack=function(){this.refreshCallback.emit()},t}();z.decorators=[{type:e.Component,args:[{selector:"smartstock-on-fetch",template:'\n    <div *ngIf="!isLoading" class="no-data-wrapper">\n      <img src="/src/assets/img/empty.svg" width="200px" alt="">\n      <h4>No Data</h4>\n      <button (click)="callBack()" matTooltip="Click to refresh" mat-raised-button mat-icon-button>\n        <mat-icon color="accent">\n          refresh\n        </mat-icon>\n      </button>\n    </div>\n\n    <div *ngIf="isLoading" class="no-data-wrapper">\n      <img src="/src/assets/img/data.svg" width="200px" alt="">\n      <h4>Fetching data...</h4>\n      <mat-progress-spinner color="accent" mode="indeterminate" [diameter]="30"></mat-progress-spinner>\n    </div>\n  ',styles:[".no-data-wrapper{align-items:center;display:flex;flex-direction:column;justify-content:center;margin-top:48px}.no-data-wrapper>h4{padding:8px}"]}]}],z.ctorParameters=function(){return[]},z.propDecorators={refreshCallback:[{type:e.Output}],isLoading:[{type:e.Input}]};var V=function(){function t(){this.showSearch=!1,this.searchProgressFlag=!1,this.searchPlaceholder="Enter something..."}return t.prototype.ngOnInit=function(){},t}();V.decorators=[{type:e.Component,args:[{selector:"smartstock-search-input",template:'\n    <div style="width: 100%">\n      <input [formControl]="searchInputControl"\n             *ngIf="showSearch"\n             class="toolbar-input" type="text" placeholder="{{searchPlaceholder}}">\n      <mat-progress-spinner style="display: inline-block; margin-left: -30px"\n                            mode="indeterminate" diameter="25"\n                            color="primary"\n                            *ngIf="showSearch && searchProgressFlag"\n                            matSuffix>\n        \x3c!--      <mat-icon>search</mat-icon>--\x3e\n      </mat-progress-spinner>\n    </div>\n  ',styles:[".toolbar-input{background:hsla(0,0%,96.5%,.76);border:none;border-radius:4px;box-shadow:none;color:#000;outline:none;padding:8px;width:100%}.toolbar-input::-moz-placeholder{color:#535353}.toolbar-input:-ms-input-placeholder{color:#535353}.toolbar-input::placeholder{color:#535353}.toolbar-input:focus{outline:none}"]}]}],V.ctorParameters=function(){return[]},V.propDecorators={searchInputControl:[{type:e.Input}],showSearch:[{type:e.Input}],searchProgressFlag:[{type:e.Input}],searchPlaceholder:[{type:e.Input}]};var W=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.activeNav=function(t){return new URL(location.href).pathname.startsWith("/"+t)},t}();W.decorators=[{type:e.Component,args:[{selector:"smartstock-bottom-bar",template:'\n    <mat-toolbar class="fixed-bottom bottom-smartstock-bar">\n\n      <div class="flex-grow-1 d-flex justify-content-center align-items-center flex-column">\n        <button mat-icon-button *ngIf="activeNav(\'dashboard\')" mat-flat-button routerLink="/dashboard">\n          <mat-icon color="{{activeNav(\'dashboard\')?\'primary\':\'\'}}">dashboard</mat-icon>\n        </button>\n        <button *ngIf="!activeNav(\'dashboard\')" mat-icon-button routerLink="/dashboard">\n          <mat-icon>dashboard</mat-icon>\n        </button>\n        \x3c!--    <span *ngIf="activeNav(\'dashboard\')">Dashboard</span>--\x3e\n      </div>\n\n      <div class="flex-grow-1 d-flex justify-content-center align-items-center flex-column">\n        <button mat-icon-button *ngIf="activeNav(\'sale\')" mat-flat-button routerLink="/sale">\n          <mat-icon color="{{activeNav(\'sale\')?\'primary\':\'\'}}">shop</mat-icon>\n        </button>\n        <button *ngIf="!activeNav(\'sale\')" mat-icon-button routerLink="/sale">\n          <mat-icon>shop</mat-icon>\n        </button>\n        \x3c!--    <span *ngIf="activeNav(\'sale\')">Sale</span>--\x3e\n      </div>\n\n      <div class="flex-grow-1 d-flex justify-content-center align-items-center flex-column">\n        <button mat-icon-button *ngIf="activeNav(\'purchase\')" mat-flat-button routerLink="/purchase">\n          <mat-icon color="{{activeNav(\'purchase\')?\'primary\':\'\'}}">receipt</mat-icon>\n        </button>\n        <button *ngIf="!activeNav(\'purchase\')" mat-icon-button routerLink="/purchase">\n          <mat-icon>receipt</mat-icon>\n        </button>\n        \x3c!--    <span *ngIf="activeNav(\'purchase\')">Purchase</span>--\x3e\n      </div>\n\n      <div class="flex-grow-1 d-flex justify-content-center align-items-center flex-column">\n        <button mat-icon-button *ngIf="activeNav(\'stock\')" mat-flat-button routerLink="/stock">\n          <mat-icon color="{{activeNav(\'stock\')?\'primary\':\'\'}}">store</mat-icon>\n        </button>\n        <button *ngIf="!activeNav(\'stock\')" mat-icon-button routerLink="/stock">\n          <mat-icon>store</mat-icon>\n        </button>\n        \x3c!--    <span *ngIf="activeNav(\'stock\')">StockModel</span>--\x3e\n      </div>\n\n      <div class="flex-grow-1 d-flex justify-content-center align-items-center flex-column">\n        <button mat-icon-button *ngIf="activeNav(\'settings\')" mat-flat-button routerLink="/account">\n          <mat-icon color="{{activeNav(\'settings\')?\'primary\':\'\'}}">settings</mat-icon>\n        </button>\n        <button *ngIf="!activeNav(\'settings\')" mat-icon-button routerLink="/account">\n          <mat-icon>settings</mat-icon>\n        </button>\n        \x3c!--    <span *ngIf="activeNav(\'settings\')">Settings</span>--\x3e\n      </div>\n\n    </mat-toolbar>\n  ',styles:["span{font-size:11px;font-weight:lighter}.bottom-smartstock-bar{background:#fff;box-shadow:0 -1px 7px rgba(0,0,0,.35)}"]}]}],W.ctorParameters=function(){return[]};var G=function(){function t(){this.width=200,this.height=200,this.isLoading=!1}return t.prototype.ngOnInit=function(){},t}();G.decorators=[{type:e.Component,args:[{selector:"smartstock-data-not-ready",template:'\n    <div *ngIf="!isLoading" style="margin-top: 10px; margin-bottom: 10px"\n         class="d-flex flex-column justify-content-center align-items-center">\n      <img alt="no data" src="../../../../assets/img/data.svg" width="{{width}}" height="{{height}}"/>\n      <span>Data is not ready yet</span>\n    </div>\n    <div *ngIf="isLoading" style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center">\n      <mat-progress-spinner mode="indeterminate" [diameter]="30"></mat-progress-spinner>\n    </div>\n  '}]}],G.ctorParameters=function(){return[]},G.propDecorators={width:[{type:e.Input}],height:[{type:e.Input}],isLoading:[{type:e.Input}]};var X=function(){function t(){this.files=[],this.uploadFileFormControl=new c.FormControl([],[c.Validators.nullValidator,c.Validators.required])}return t.prototype.ngOnInit=function(){},t.prototype.removeFile=function(t,e){t.preventDefault(),this.files.splice(e,1)},t.prototype.uploadFiles=function(t,e){return F(this,void 0,void 0,(function(){var n,r;return M(this,(function(o){return(n=t.target.files).item(0)&&(r=n.item(0),0===this.files.length||(this.files=this.files.filter((function(t){return r.name!==t.name}))),this.files.push({name:r.name,type:r.type,url:r}),this.uploadFileFormControl.setValue(this.files),e.value=""),[2]}))}))},t}();X.decorators=[{type:e.Component,args:[{selector:"smartstock-upload-files",template:'\n    <div style="display: flex; flex-direction: row; flex-wrap: wrap; align-items: center; padding: 8px">\n      <div *ngFor="let file of files; let i =index"\n           style="display: flex; flex-direction: row; flex-wrap: nowrap; align-items: center">\n        <mat-card style="height: 50px; margin: 5px; display: flex; flex-direction: row; align-items: center">\n          <span style="max-width: 200px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis">\n            {{file.name}}\n          </span>\n          <span style="width: 10px"></span>\n          <button mat-icon-button style="display: inline-block" (click)="removeFile($event, i)">\n            <mat-icon color="warn">delete</mat-icon>\n          </button>\n        </mat-card>\n      </div>\n      <mat-card (click)="uploadFile.click()" matRipple style="width: 120px; height: 50px; margin: 5px">\n        <mat-icon>attachment</mat-icon>\n        <span>Add File</span>\n      </mat-card>\n    </div>\n\n    <input style="display: none" #uploadFile [multiple]="false" type="file" (change)="uploadFiles($event,uploadFile)">\n  '}]}],X.ctorParameters=function(){return[]},X.propDecorators={files:[{type:e.Input}],uploadFileFormControl:[{type:e.Input}]};var Y=function(){function t(t){this.router=t,this.title="",this.height=300,this.description=""}return t.prototype.ngOnInit=function(){},t.prototype.goTo=function(){this.reportLink&&this.router.navigateByUrl(this.reportLink).catch(console.log)},t}();Y.decorators=[{type:e.Component,args:[{selector:"smartstock-dash-card",template:'\n    <mat-card class="d-flex flex-column" [ngStyle]="{height:height+\'px\'}">\n      <mat-card-header style="margin: 0">\n        <span>{{title}}</span>\n        <span style="margin-left: 8px"></span>\n        <mat-icon matTooltip="{{description}}">info_outline</mat-icon>\n      </mat-card-header>\n      <mat-card-content class="flex-grow-1">\n        <ng-container [ngTemplateOutlet]="content"></ng-container>\n      </mat-card-content>\n      <hr *ngIf="reportLink" style="width: 100%; margin: 0; padding: 0">\n      <mat-card-actions *ngIf="reportLink" class="d-flex flex-row">\n        <span style="flex: 1 1 auto"></span>\n        <button (click)="goTo()"color="primary" mat-button>\n          EXPLORE REPORT\n          <mat-icon matSuffix>arrow_forward</mat-icon>\n        </button>\n      </mat-card-actions>\n    </mat-card>\n  '}]}],Y.ctorParameters=function(){return[{type:s.Router}]},Y.propDecorators={title:[{type:e.Input}],height:[{type:e.Input}],description:[{type:e.Input}],reportLink:[{type:e.Input}],content:[{type:e.Input}]};var K=function(){function t(){this.name="",this.onUploadFlag=!1,this.uploadPercentage=0}return t.prototype.ngOnInit=function(){},t}();K.decorators=[{type:e.Component,args:[{selector:"smartstock-upload-file-progress",template:'\n    <div *ngIf="onUploadFlag">\n      <mat-progress-bar [bufferValue]="100" mode="determinate" [value]="uploadPercentage"></mat-progress-bar>\n      <span>{{name}} {{uploadPercentage}}%</span>\n    </div>\n  '}]}],K.ctorParameters=function(){return[]},K.propDecorators={name:[{type:e.Input}],onUploadFlag:[{type:e.Input}],uploadPercentage:[{type:e.Input}]};var $=function(){function t(t,e){this.dialogRef=t,this.data=e}return t.prototype.delete=function(t){this.dialogRef.close(t)},t.prototype.cancel=function(){this.dialogRef.close("no")},t}();$.decorators=[{type:e.Component,args:[{selector:"smartstock-lisb-dialog-delete",template:'\n    <div class="container">\n      <div class="row">\n        <div class="col-12">\n          <mat-panel-title class="text-center">\n            Your about to delete :  <b>{{\' \'+ data.product}}</b>\n          </mat-panel-title>\n        </div>\n      </div>\n      <div class="d-flex justify-content-center">\n        <div class="align-self-center" style="margin: 8px">\n          <button color="primary"  mat-button (click)="delete(data)">Delete</button>\n        </div>\n        <div class="alert-secondary" style="margin: 8px">\n          <button color="primary" mat-button (click)="cancel()">Cancel</button>\n        </div>\n      </div>\n    </div>\n  '}]}],$.ctorParameters=function(){return[{type:r.MatDialogRef},{type:void 0,decorators:[{type:e.Inject,args:[r.MAT_DIALOG_DATA]}]}]};var J=function(){function t(){}return t.start=function(t){void 0===t&&(t={version:""}),D.versionName=t.version},t}();J.decorators=[{type:e.NgModule,args:[{imports:[C.CommonModule,b.MatProgressSpinnerModule,p.MatCardModule,h.MatExpansionModule,d.MatDividerModule,g.MatListModule,y.MatProgressBarModule,I.MatToolbarModule,f.MatIconModule,v.MatMenuModule,l.MatButtonModule,s.RouterModule,m.MatFormFieldModule,c.ReactiveFormsModule,r.MatDialogModule,w.MatSelectModule,x.MatBadgeModule,S.MatTooltipModule,k.MatRippleModule],exports:[B,O,H,z,W,G,X,Y,K],declarations:[B,O,q,H,z,V,W,G,X,Y,$,K,T]}]}];var Q=function(){function t(t){this.storageService=t}return t.prototype.saveFile=function(t,e){return F(this,void 0,void 0,(function(){var n;return M(this,(function(r){switch(r.label){case 0:return t&&t instanceof File?[4,this.storageService.getActiveShop()]:[3,2];case 1:return n=r.sent(),[2,a.BFast.storage(null==n?void 0:n.projectId).save(t,(function(t){e(Number(t.loaded)/Number(t.total)*100)}))];case 2:return t&&"string"==typeof t&&t.startsWith("http")?[2,t]:[2,null];case 3:return[2]}}))}))},t}();Q.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new Q(e.ɵɵinject(N))},token:Q,providedIn:"any"}),Q.decorators=[{type:e.Injectable,args:[{providedIn:"any"}]}],Q.ctorParameters=function(){return[{type:N}]};var Z=function(){function t(t){this.matSnackBar=t}return t.prototype.showMobileInfoMessage=function(t,e,n){void 0===e&&(e=3e3),void 0===n&&(n="top"),this.matSnackBar.open(t,"Ok",{horizontalPosition:"center",verticalPosition:n,duration:e})},t}();Z.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new Z(e.ɵɵinject(P.MatSnackBar))},token:Z,providedIn:"root"}),Z.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],Z.ctorParameters=function(){return[{type:P.MatSnackBar}]};var tt=function(){function t(){}return t.prototype.getWidth=function(){return window.innerWidth},t.prototype.enoughWidth=function(){return this.getWidth()>1e3},t.prototype.openDrawer=function(t){t.open().catch()},t}();t.DeviceInfoUtil=tt,t.EventService=j,t.FileLibraryService=Q,t.LibModule=J,t.LogService=U,t.MessageService=Z,t.NoStockDialogComponent=q,t.SecurityUtil=L,t.SettingsService=R,t.SsmEvents=_,t.StorageService=N,t.UserService=E,t.toSqlDate=function(t){var e=t.getFullYear(),n=(t.getMonth()+1).toString(10),r=t.getDate().toString(10);return 1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),e+"-"+n+"-"+r},t.ɵa=B,t.ɵb=O,t.ɵc=H,t.ɵd=z,t.ɵe=W,t.ɵf=G,t.ɵg=X,t.ɵh=Y,t.ɵi=K,t.ɵj=V,t.ɵk=$,t.ɵm=T,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=smartstock-core-libs.umd.min.js.map